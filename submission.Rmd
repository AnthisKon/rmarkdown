---
title: "Assignment: R Markdown and Leaflet"
subtitle: "Coursera Course: Developing Data Products"
author: "Konstantinos"
date: "`r paste('December',format(Sys.Date(),'%d'),',',format(Sys.Date(),'%Y'))`"
output:
 prettydoc::html_pretty:
   df_print: paged
   fig_caption: yes
   highlight: vignette
   number_sections: yes
   theme: hpstr
   toc: yes
---
```{r setup, include=FALSE}
# default", "tango", "pygments", "kate", "monochrome", "espresso", "zenburn", "haddock", "textmate"
knitr::opts_chunk$set(tidy = FALSE)
options(htmltools.dir.version = FALSE,knitr.table.format = 'markdown')
```
```{r include=FALSE}
library(lubridate)
library(leaflet)
library(dplyr)
library(knitr)
library(kableExtra)
Sys.setlocale("LC_ALL","English")
```
# Dataset
I googled *'map datasets for R'* and [this website](http://simplemaps.com/data/world-cities) came up. Not a lot of data, but ok for this task. 
No time to do something cooler :(

- Bellow you can see the first 6 rows of the dataset just to get an idea what the dataset is about.
```{r}
mapdata = read.csv('data.csv')
head(mapdata)
```


# Map 
- The map has a circle for each city with population over 500,000. The size of the circle is proportional to the size of the population. 
- The pop ups contains the population of the city and the name of the city
- I also included clusters just to see how many cities have population over 500,000 for each region/polygon so zoom in/out to check it out

```{r warning=FALSE}
mapdata[mapdata$pop >= 500000,]%>%
  leaflet()  %>% 
  addProviderTiles(providers$Esri.NatGeoWorldMap) %>%  
  addCircles(lng = ~lng, 
             lat = ~lat, 
             weight = 1,
             radius = ~sqrt(pop) * 30, 
             popup = ~city , 
             label = ~as.character(
                    format(pop,
                           big.mark = ",",
                           small.mark = "."))) %>% addMarkers(
  clusterOptions = markerClusterOptions())
```
